# Состояние проекта CogniRead на 2026-01-20

## Ключевое
- Локальный Flutter-клиент с импортом EPUB/FB2/FB2.ZIP, библиотекой и чтением.
- Экран чтения с нативным рендером, оглавлением, восстановлением позиции, заметками/выделениями/закладками.
- Поиск по книге и глобальный поиск по библиотеке через локальный индекс.
- Реализована server-less file-based синхронизация (Dropbox, Яндекс.Диск, WebDAV/SMB).
- AI и backend sync-gateway пока не реализованы.

## Что уже есть
### Flutter (root)
- Реальный импорт EPUB/FB2/FB2.ZIP (file_picker) с копированием в app-managed storage.
- Дедупликация по хэшу и сохранение в локальной библиотеке (Hive).
- Экран чтения: парсинг EPUB/FB2, оглавление, навигация по главам, обработка ошибок.
- Сохранение позиции чтения (глава + смещение) и восстановление при открытии.
- Заметки/выделения/закладки (сейчас одна закладка на книгу) и переход к месту.
- Поиск по книге с подсветкой результата.
- Глобальный поиск по библиотеке (книги/заметки/выделения) через локальный индекс.
- Desktop и mobile UI (адаптивная библиотека, встраиваемый Reader, поиск по библиотеке).
- UI-keys на критических элементах (для стабильных widget-тестов).
- Извлечение обложек EPUB, хранение и отображение в библиотеке.

### Sync (Stage 1)
- File-based sync engine: `event_log.json`, `state.json`, `meta.json`, `books_index.json`.
- Провайдеры: Dropbox, Яндекс.Диск, WebDAV/SMB.
- UI состояния: статус последней синхронизации, ручной запуск, переподключение, диагностика.

### docs/
- `docs/spec_mvp.md` — исторический scope по MVP и этапам.
- `docs/plan_mvp0.md`, `docs/plan_mvp1.md` — завершенные планы итераций.
- `docs/plan_next_stages.md` — актуальный план следующих этапов.

### scripts/
- `scripts/bootstrap_platforms.sh`
- `scripts/check_env.sh`

## Что намеренно НЕ сделано (следующий шаг)
1) Backend sync-gateway с realtime каналом (Stage 2).
2) AI-слой: суммаризация/вопросы/knowledge graph (Stage 3).
3) Семантический поиск (эмбеддинги) поверх библиотеки.

## Команды старта
```bash
flutter pub get
flutter run -d macos
```
