# MVP Scope for Cogniread

Источники: docs/final_tech_stack.docx, docs/solution_architecture_doc.docx, docs/architecture_diagrams.docx.

## MVP (точно делаем)

### Функциональные возможности
- Читалка книг/документов.
- Импорт/загрузка книг в библиотеку.
- Базовое AI‑summary по книге/главе (простое резюмирование).
- Синхронизация между устройствами: события прогресса/библиотеки через WebSockets, источник правды и хранение — Backend API + PostgreSQL.

### Платформы
- Кроссплатформенная клиентская часть на Flutter (mobile/desktop).
- Целевые платформы: iOS 16+, Android 10+, macOS 13+, Windows 11.

### Архитектурные принципы
- Модульность: чтение и AI как отдельные подсистемы.
- Offline-first для чтения с последующей синхронизацией; конфликт по прогрессу — last-write-wins, по библиотеке — явное подтверждение пользователя.

### Бэкенд и данные
- Backend API на NestJS.
- AI‑сервис на FastAPI + LangChain.
- PostgreSQL для пользователей и библиотеки.
- S3‑совместимое хранилище для файлов книг.
- Канал синхронизации: WebSockets через отдельный gateway, масштабирование — sticky‑sessions или dedicated WS‑gateway.

### Нефункциональные требования (MVP)
- Производительность: открытие книги ≤ 2 сек, переход между главами ≤ 300 мс на типовом устройстве (мобильный mid‑tier, 2020+).
- Латентность AI‑summary: p95 ≤ 8 сек для входа до 20 000 символов, p99 ≤ 15 сек.
- Надежность: при потере сети до 10 минут данные не теряются; синхронизация завершается автоматически в течение 60 сек после восстановления.
- Масштабирование: возможность горизонтально масштабировать NestJS/FastAPI как stateless‑сервисы.

## Acceptance criteria (MVP)

### Функциональные возможности
- Читалка книг/документов: поддерживаются форматы EPUB и PDF; книга открывается ≤ 2 сек на типовом устройстве; сохраняется прогресс чтения и последняя позиция.
- Импорт/загрузка книг: импорт локального файла и по URL; книга появляется в библиотеке с метаданными (название/автор при наличии); при ошибке показано понятное сообщение.
- Базовое AI‑summary: summary доступен для книги и главы; длина 5–10 предложений; результат сохраняется и повторно доступен.
- Синхронизация между устройствами: прогресс чтения и библиотека синхронизируются между 2 устройствами одной учетной записи; задержка доставки событий ≤ 10 сек при стабильной сети; оффлайн‑изменения догоняются после восстановления.

### Платформы
- Приложение запускается и проходит smoke‑проверку на iOS 16+, Android 10+, macOS 13+, Windows 11.

### Архитектурные принципы
- Модули чтения и AI имеют документированные контракты; изменения AI не требуют правок в модуле чтения.
- Offline‑first: чтение доступно без сети для загруженных книг; стратегия конфликтов применяется согласно правилам (progress — last‑write‑wins, library — подтверждение пользователя).

### Бэкенд и данные
- Backend API на NestJS: описаны эндпоинты и схемы запрос/ответ; базовые операции библиотеки работают.
- AI‑сервис на FastAPI + LangChain: endpoint `/summary` доступен из backend; ограничения на размер входа задокументированы.
- PostgreSQL: схемы БД и миграции присутствуют; сущности User/Book/LibraryItem описаны.
- S3‑совместимое хранилище: загрузка/скачивание через presigned URL или proxy; доступ ограничен владельцем.
- Канал синхронизации: определены события realtime и источник правды; обновление прогресса доставляется ≤ 10 сек.

## После MVP (делаем позже)

### Phase 2
- Заметки/аннотации.
- Поиск по библиотеке.
- Персональная база знаний.

### Phase 3
- Knowledge Graph (Neo4j) и связи между сущностями.
- Рекомендации по темам/связям.
- Расширенные AI‑объяснения и аналитика.

### Phase 4
- Полноценный knowledge graph с расширенной логикой связей.

### Phase 5
- Офлайн/edge‑модель AI на устройстве.

### Дополнительные слои и инфраструктура
- Vector DB (Qdrant) для retrieval/семантического поиска.
- Observability: Grafana, Sentry, OpenTelemetry.
- Очереди задач и кэширование (Redis/BullMQ или RabbitMQ).
