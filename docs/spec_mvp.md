# Scope for CogniRead (MVP0/MVP1/MVP2 → Stages)

Источники: docs/final_tech_stack.docx, docs/solution_architecture_doc.docx, docs/architecture_diagrams.docx.

## Статус (актуально)
MVP0–MVP2 в репозитории уже существенно расширены: реализованы импорт/чтение, заметки/выделения/закладки, поиск и Stage 1 (server‑less file-based sync). Этот файл оставляем как “исторический” baseline и дополняем текущими этапами ниже.

## MVP0 (локальный клиент)

### Функциональные возможности
- Локальная библиотека книг (без аккаунта и синхронизации).
- Импорт EPUB из локального файла (заглушка UI до подключения picker/парсера).
- Экран чтения с базовым UI (заглушка контента).

### Платформы
- Flutter-приложение с фокусом на desktop (macOS), без облака и backend.
- Поддержка мобильных/десктопных платформ закладывается структурно, без обязательного покрытия в MVP0.

### Архитектурные принципы
- Clean Architecture слои (presentation/domain/data) с минимальными заглушками.
- Ошибки и результаты оборачиваются в Result, без реального IO.

### Нефункциональные требования (MVP0)
- Приложение запускается, навигация работает без падений.
- Импорт-экран добавляет запись в библиотеку (stub).
- Переход Library → Reader стабилен.

## Acceptance criteria (MVP0)

### Функциональные возможности
- При запуске виден экран Library с пустым состоянием и CTA "Импортировать EPUB (заглушка)".
- Нажатие "Импортировать EPUB (заглушка)" добавляет одну запись в список без ошибок в консоли.
- Повторные нажатия "Импортировать EPUB (заглушка)" добавляют новые записи (уникальный заголовок/время).
- Тап по записи открывает экран Reader и отображает заголовок выбранной книги.

### Платформы
- `flutter run -d macos` запускает приложение без падений.
- `flutter test` проходит локально/в CI.

### Архитектурные принципы
- В `lib/src/` присутствуют слои `presentation/`, `domain/`, `data/`.
- В слое `domain` отсутствуют импорты из `data`.
- Ключевые операции репозитория возвращают `Result`, а не выбрасывают исключения наружу.

## MVP1 (локальный импорт)
- Реальный импорт EPUB (picker, копирование в sandbox storage).
- Парсинг метаданных (title/author/cover).
- Базовое хранение на диске для локальной библиотеки.

## MVP2 (расширение клиента)
- Заметки/аннотации.
- Поиск по библиотеке.
- Улучшения UX чтения (прогресс, оглавление).

## После MVP2 (следующие этапы)

### Stage 1 — Server-less sync (file-based)
- Единый `SyncAdapter` + локальный sync engine (event log/state) и провайдеры облачных дисков/NAS.
- Цель: “пользовательское качество” синка без собственного backend.
- Документы: `docs/release_plan_stage1.md`, `docs/test_plan_stage1_sync.md`, `docs/sync_file_based.md`.

### Stage 1.1 — Добавление провайдеров (план)
- Google Drive + OneDrive: OAuth-конфиг/UX подключения и прогон acceptance criteria.

### Stage 2 — Backend sync-gateway (future)
- Собственный sync-gateway (API + storage + LWW) + WebSockets (real-time канал).
- Документы: `docs/sync_gateway_api.md`, `docs/sync_gateway_storage.md`, `docs/sync_policy.md`, `docs/sync_observability.md`.

### Stage 3 — AI и база знаний (future)
- AI-summary/объяснения/вопросы, кеширование и постепенный переход к knowledge graph (Qdrant/Neo4j) по мере готовности backend.
