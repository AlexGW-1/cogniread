# Manual Test Plan — Notes & Global Search

Цель: воспроизводимые ручные сценарии для вкладок `Заметки` и `Поиск`.

## Подготовка

- Импортировать 2 книги.
- В Reader создать минимум 2 заметки и 2 выделения в разных главах.
- Создать 1 закладку (для перехода по anchor).

## A) Notes (вкладка “Заметки”)

### A1 — Базовое открытие и пустое состояние
1) Открыть `Заметки`.
2) Если элементов нет, убедиться, что показан текст “Пока нет заметок и выделений”.

Ожидаемо:
- Экран открывается без ошибок.
- Пустое состояние корректное.

### A2 — Поиск по заметкам/выделениям
1) Ввести слово из текста заметки или excerpt.
2) Очистить поиск и ввести имя автора/название книги.

Ожидаемо:
- Список фильтруется по тексту заметок/выделений и метаданным книги.

### A3 — Цветовые фильтры
1) Выбрать 1–2 цвета фильтра.
2) Снять фильтры.

Ожидаемо:
- В списке остаются элементы только выбранных цветов.
- После снятия фильтров показываются все элементы.

### A4 — Группировка “Лента/Книги”
1) Переключиться на “Лента”.
2) Переключиться на “Книги”.

Ожидаемо:
- “Лента”: элементы отсортированы по времени.
- “Книги”: элементы сгруппированы по книге, заголовок показывает количество.

### A5 — Просмотр и переход в Reader
1) Открыть превью элемента (иконка/тап по карточке, если нет выделения).
2) Нажать “Перейти”.

Ожидаемо:
- Открывается Reader на корректной позиции (anchor).

### A6 — Выбор, экспорт и удаление
1) Включить режим выбора, выбрать 2 элемента.
2) Экспортировать выбранное.
3) Удалить выбранное.

Ожидаемо:
- Экспорт завершился без ошибок.
- Удаленные элементы исчезли из списка.

### A7 — Free note (без книги)
1) Нажать “Новая заметка”.
2) Ввести текст и сохранить.
3) Открыть созданную заметку и изменить текст.

Ожидаемо:
- Free note отображается в списке и редактируется.

## B) Global Search (вкладка “Поиск”)

### B1 — Базовый поиск и вкладки
1) Открыть `Поиск`.
2) Убедиться, что доступны вкладки Books / Notes / Quotes.
3) Ввести запрос из текста книги или заметки.

Ожидаемо:
- Результаты появляются на соответствующих вкладках.

### B2 — Переход по результату
1) На вкладке Notes или Quotes нажать результат.

Ожидаемо:
- Открывается Reader в нужной позиции.

### B3 — Пустой запрос
1) Очистить поле поиска.

Ожидаемо:
- Показано корректное пустое состояние без ошибок.

## Примечания

- Детальный тест‑план Global Search v2: `docs/manual_test_plan_milestone2.md`.
