# План MVP1 — локальный импорт

Основание: `docs/spec_mvp.md` (раздел MVP1).

## Цели
- Реальный импорт EPUB через picker.
- Сохранение файла в app-managed storage.
- Парсинг метаданных (title/author/cover).
- Базовое хранение в локальной библиотеке.

## День 1 — Импорт EPUB
Чеклист:
- [ ] File picker подключен для desktop (macOS).
- [ ] Валидация пути/расширения/размера файла.
- [ ] Копирование файла в app-managed storage (sandbox).
- [ ] Дедупликация по хэшу.
- ✅ Контроль: импорт одного EPUB добавляет запись без ошибок.

## День 2 — Метаданные
Чеклист:
- [ ] Извлечь title/author из EPUB.
- [ ] Обработка пустых/битых метаданных (fallback на имя файла).
- [ ] Сохранение метаданных в LibraryStore.
- ✅ Контроль: название и автор отображаются в библиотеке.

## День 3 — Обложка
Чеклист:
- [ ] Извлечь cover (если есть) и сохранить локально.
- [ ] Хранить путь к cover в записи книги.
- [ ] Показать cover в библиотеке (fallback: генератор обложки).
- ✅ Контроль: при наличии cover она отображается, иначе fallback.

## День 4 — Хранение и устойчивость
Чеклист:
- [ ] Проверка/миграция схемы LibraryStore под новые поля.
- [ ] Очистка/удаление книги удаляет файл и обложку.
- [ ] Обработка отсутствующих файлов (показывать ошибку/обновить запись).
- ✅ Контроль: перезапуск не ломает библиотеку.

## Acceptance criteria (MVP1)
- `flutter run -d macos` импортирует EPUB через picker.
- Импортированный файл сохраняется в app-managed storage.
- В библиотеке отображаются title/author и cover (если есть).
- Удаление книги удаляет файл и cover с диска.
